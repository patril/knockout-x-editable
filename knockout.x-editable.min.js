(function(n){typeof define=="function"&&define.amd?define(["knockout","jquery"],n):n(window.ko,window.jQuery)})(function(n,t){n.bindingHandlers.editable={init:function(i,r,u,f,e){var c=t(i),s=r(),a=u(),o=a.editableOptions||{},h;if(o.value=n.utils.unwrapObservable(s),o.name||t.each(e.$data,function(n,t){if(t==s)return o.name=n,!1}),!o.validate&&s.isValid&&(o.validate=function(t){var r=s(),i;return s(t),i=s.isValid()?null:n.utils.unwrapObservable(s.error),s(r),i}),(o.type==="select"||o.type==="select2"||o.type==="checklist"||o.type==="bstypeahead")&&!o.source&&o.options){o.optionsCaption&&(o.prepend=o.optionsCaption);function l(n,t,i){var r=typeof t;return r=="function"?t(n):r=="string"?n[t]:i}o.source=function(){return n.utils.arrayMap(n.utils.unwrapObservable(o.options),function(t){var i=l(t,o.optionsValue,t),r=l(t,o.optionsText,i);return{value:n.utils.unwrapObservable(i),text:n.utils.unwrapObservable(r)}})}}if(o.visible&&n.isObservable(o.visible)&&(o.toggle="manual"),o.init)c.on("init.ko",o.init);if(h=c.editable(o),o.bindTextInput&&o.bindTextInput===!0)h.on("shown.ko",function(t,i){arguments.length==2&&n.applyBindingsToNode(i.input.$input[0],{textInput:s},s)});else if(n.isObservable(s))h.on("save.ko",function(n,t){s(t.newValue)});if(o.shown)h.on("shown.ko",o.shown);if(o.save)h.on("save",o.save);if(n.computed({read:function(){var t=n.utils.unwrapObservable(r());t===null&&(t="");h.editable("setValue",t,!0)},owner:this,disposeWhenNodeIsRemoved:i}),o.visible&&n.isObservable(o.visible)){n.computed({read:function(){var t=n.utils.unwrapObservable(o.visible());t&&h.editable("show")},owner:this,disposeWhenNodeIsRemoved:i});h.on("hidden.ko",function(){o.visible(!1)})}}}});